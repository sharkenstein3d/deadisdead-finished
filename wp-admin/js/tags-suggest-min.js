!function($){function e(e){return e.split(new RegExp(n+"\\s*"))}function t(t){return e(t).pop()}if(void 0!==window.tagsSuggestL10n&&void 0!==window.uiAutocompleteL10n){var o=0,n=window.tagsSuggestL10n.tagDelimiter||",";$.fn.wpTagsSuggest=function(a){var i,r,u=$(this);a=a||{};var s=a.taxonomy||u.attr("data-wp-taxonomy")||"post_tag";return delete a.taxonomy,a=$.extend({source:function(e,n){var a;if(r===e.term)return void n(i);a=t(e.term),$.get(window.ajaxurl,{action:"ajax-tag-search",tax:s,q:a}).always(function(){u.removeClass("ui-autocomplete-loading")}).done(function(e){var t,a=[];if(e){e=e.split("\n");for(t in e){var r=++o;a.push({id:r,name:e[t]})}i=a,n(a)}else n(a)}),r=e.term},focus:function(e,t){u.attr("aria-activedescendant","wp-tags-autocomplete-"+t.item.id),e.preventDefault()},select:function(t,o){var a=e(u.val());return a.pop(),a.push(o.item.name,""),u.val(a.join(n+" ")),$.ui.keyCode.TAB===t.keyCode?(window.wp.a11y.speak(window.tagsSuggestL10n.termSelected,"assertive"),t.preventDefault()):$.ui.keyCode.ENTER===t.keyCode&&(t.preventDefault(),t.stopPropagation()),!1},open:function(){u.attr("aria-expanded","true")},close:function(){u.attr("aria-expanded","false")},minLength:2,position:{my:"left top+2",at:"left bottom",collision:"none"},messages:{noResults:window.uiAutocompleteL10n.noResults,results:function(e){return e>1?window.uiAutocompleteL10n.manyResults.replace("%d",e):window.uiAutocompleteL10n.oneResult}}},a),u.on("keydown",function(){u.removeAttr("aria-activedescendant")}).autocomplete(a).autocomplete("instance")._renderItem=function(e,t){return $('<li role="option" id="wp-tags-autocomplete-'+t.id+'">').text(t.name).appendTo(e)},u.attr({role:"combobox","aria-autocomplete":"list","aria-expanded":"false","aria-owns":u.autocomplete("widget").attr("id")}).on("focus",function(){e(u.val()).pop()&&u.autocomplete("search")}).autocomplete("widget").addClass("wp-tags-autocomplete").attr("role","listbox").removeAttr("tabindex").on("menufocus",function(e,t){t.item.attr("aria-selected","true")}).on("menublur",function(){$(this).find('[aria-selected="true"]').removeAttr("aria-selected")}),this}}}(jQuery);