window.wp=window.wp||{};var inlineEditPost;!function($,t){inlineEditPost={init:function(){var t=this,e=$("#inline-edit"),i=$("#bulk-edit");t.type=$("table.widefat").hasClass("pages")?"page":"post",t.what="#post-",e.keyup(function(t){if(27===t.which)return inlineEditPost.revert()}),i.keyup(function(t){if(27===t.which)return inlineEditPost.revert()}),$(".cancel",e).click(function(){return inlineEditPost.revert()}),$(".save",e).click(function(){return inlineEditPost.save(this)}),$("td",e).keydown(function(t){if(13===t.which&&!$(t.target).hasClass("cancel"))return inlineEditPost.save(this)}),$(".cancel",i).click(function(){return inlineEditPost.revert()}),$('#inline-edit .inline-edit-private input[value="private"]').click(function(){var t=$("input.inline-edit-password-input");$(this).prop("checked")?t.val("").prop("disabled",!0):t.prop("disabled",!1)}),$("#the-list").on("click","a.editinline",function(t){t.preventDefault(),inlineEditPost.edit(this)}),$("#bulk-edit").find("fieldset:first").after($("#inline-edit fieldset.inline-edit-categories").clone()).siblings("fieldset:last").prepend($("#inline-edit label.inline-edit-tags").clone()),$('select[name="_status"] option[value="future"]',i).remove(),$("#doaction, #doaction2").click(function(e){var i;t.whichBulkButtonId=$(this).attr("id"),i=t.whichBulkButtonId.substr(2),"edit"===$('select[name="'+i+'"]').val()?(e.preventDefault(),t.setBulk()):$("form#posts-filter tr.inline-editor").length>0&&t.revert()})},toggle:function(t){var e=this;"none"===$(e.what+e.getId(t)).css("display")?e.revert():e.edit(t)},setBulk:function(){var t="",e=this.type,i=!0;if(this.revert(),$("#bulk-edit td").attr("colspan",$("th:visible, td:visible",".widefat:first thead").length),$("table.widefat tbody").prepend($("#bulk-edit")).prepend('<tr class="hidden"></tr>'),$("#bulk-edit").addClass("inline-editor").show(),$('tbody th.check-column input[type="checkbox"]').each(function(){if($(this).prop("checked")){i=!1;var e=$(this).val(),n;n=$("#inline_"+e+" .post_title").html()||inlineEditL10n.notitle,t+='<div id="ttle'+e+'"><a id="_'+e+'" class="ntdelbutton" title="'+inlineEditL10n.ntdeltitle+'">X</a>'+n+"</div>"}}),i)return this.revert();$("#bulk-titles").html(t),$("#bulk-titles a").click(function(){var t=$(this).attr("id").substr(1);$('table.widefat input[value="'+t+'"]').prop("checked",!1),$("#ttle"+t).remove()}),"post"===e&&$("tr.inline-editor textarea[data-wp-taxonomy]").each(function(t,e){$(e).autocomplete("instance")||$(e).wpTagsSuggest()}),$("html, body").animate({scrollTop:0},"fast")},edit:function(t){var e=this,i,n,a,s,l,o,r,d=!0,c,p,u,h;for(e.revert(),"object"==typeof t&&(t=e.getId(t)),i=["post_title","post_name","post_author","_status","jj","mm","aa","hh","mn","ss","post_password","post_format","menu_order","page_template"],"page"===e.type&&i.push("post_parent"),n=$("#inline-edit").clone(!0),$("td",n).attr("colspan",$("th:visible, td:visible",".widefat:first thead").length),$(e.what+t).removeClass("is-expanded").hide().after(n).after('<tr class="hidden"></tr>'),a=$("#inline_"+t),$(':input[name="post_author"] option[value="'+$(".post_author",a).text()+'"]',n).val()||$(':input[name="post_author"]',n).prepend('<option value="'+$(".post_author",a).text()+'">'+$("#"+e.type+"-"+t+" .author").text()+"</option>"),1===$(':input[name="post_author"] option',n).length&&$("label.inline-edit-author",n).hide(),p=0;p<i.length;p++)u=$("."+i[p],a),u.find("img").replaceWith(function(){return this.alt}),u=u.text(),$(':input[name="'+i[p]+'"]',n).val(u);if("open"===$(".comment_status",a).text()&&$('input[name="comment_status"]',n).prop("checked",!0),"open"===$(".ping_status",a).text()&&$('input[name="ping_status"]',n).prop("checked",!0),"sticky"===$(".sticky",a).text()&&$('input[name="sticky"]',n).prop("checked",!0),$(".post_category",a).each(function(){var e,i=$(this).text();i&&(e=$(this).attr("id").replace("_"+t,""),$("ul."+e+"-checklist :checkbox",n).val(i.split(",")))}),$(".tags_input",a).each(function(){var e=$(this),i=$(this).attr("id").replace("_"+t,""),a=$("textarea.tax_input_"+i,n),s=inlineEditL10n.comma;e.find("img").replaceWith(function(){return this.alt}),e=e.text(),e&&(","!==s&&(e=e.replace(/,/g,s)),a.val(e)),a.wpTagsSuggest()}),s=$("._status",a).text(),"future"!==s&&$('select[name="_status"] option[value="future"]',n).remove(),h=$(".inline-edit-password-input").prop("disabled",!1),"private"===s&&($('input[name="keep_private"]',n).prop("checked",!0),h.val("").prop("disabled",!0)),l=$('select[name="post_parent"] option[value="'+t+'"]',n),l.length>0){for(o=l[0].className.split("-")[1],r=l;d&&(r=r.next("option"),0!==r.length);)c=r[0].className.split("-")[1],c<=o?d=!1:(r.remove(),r=l);l.remove()}return $(n).attr("id","edit-"+t).addClass("inline-editor").show(),$(".ptitle",n).focus(),!1},save:function(e){var i,n,a=$(".post_status_page").val()||"";return"object"==typeof e&&(e=this.getId(e)),$("table.widefat .spinner").addClass("is-active"),i={action:"inline-save",post_type:typenow,post_ID:e,edit_date:"true",post_status:a},n=$("#edit-"+e).find(":input").serialize(),i=n+"&"+$.param(i),$.post(ajaxurl,i,function(i){var n=$("#edit-"+e+" .inline-edit-save .error");$("table.widefat .spinner").removeClass("is-active"),$(".ac_results").hide(),i?-1!==i.indexOf("<tr")?($(inlineEditPost.what+e).siblings("tr.hidden").addBack().remove(),$("#edit-"+e).before(i).remove(),$(inlineEditPost.what+e).hide().fadeIn(400,function(){$(this).find(".editinline").focus(),t.a11y.speak(inlineEditL10n.saved)})):(i=i.replace(/<.[^<>]*?>/g,""),n.html(i).show(),t.a11y.speak(n.text())):(n.html(inlineEditL10n.error).show(),t.a11y.speak(inlineEditL10n.error))},"html"),!1},revert:function(){var t=$(".widefat"),e=$(".inline-editor",t).attr("id");return e&&($(".spinner",t).removeClass("is-active"),$(".ac_results").hide(),"bulk-edit"===e?($("#bulk-edit",t).removeClass("inline-editor").hide().siblings(".hidden").remove(),$("#bulk-titles").empty(),$("#inlineedit").append($("#bulk-edit")),$("#"+inlineEditPost.whichBulkButtonId).focus()):($("#"+e).siblings("tr.hidden").addBack().remove(),e=e.substr(e.lastIndexOf("-")+1),$(this.what+e).show().find(".editinline").focus())),!1},getId:function(t){var e=$(t).closest("tr").attr("id"),i=e.split("-");return i[i.length-1]}},$(document).ready(function(){inlineEditPost.init()}),$(document).on("heartbeat-tick.wp-check-locked-posts",function(t,e){var i=e["wp-check-locked-posts"]||{};$("#the-list tr").each(function(t,e){var n=e.id,a=$(e),s,l;i.hasOwnProperty(n)?a.hasClass("wp-locked")||(s=i[n],a.find(".column-title .locked-text").text(s.text),a.find(".check-column checkbox").prop("checked",!1),s.avatar_src&&(l=$('<img class="avatar avatar-18 photo" width="18" height="18" alt="" />').attr("src",s.avatar_src.replace(/&amp;/g,"&")),a.find(".column-title .locked-avatar").empty().append(l)),a.addClass("wp-locked")):a.hasClass("wp-locked")&&a.removeClass("wp-locked").delay(1e3).find(".locked-info span").empty()})}).on("heartbeat-send.wp-check-locked-posts",function(t,e){var i=[];$("#the-list tr").each(function(t,e){e.id&&i.push(e.id)}),i.length&&(e["wp-check-locked-posts"]=i)}).ready(function(){void 0!==t&&t.heartbeat&&t.heartbeat.interval(15)})}(jQuery,window.wp);