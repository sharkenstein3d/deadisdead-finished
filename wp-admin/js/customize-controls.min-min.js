!function(e,t){var n,i,a,o=wp.customize;o.Setting=o.Value.extend({initialize:function(e,t,n){var i=this;o.Value.prototype.initialize.call(i,t,n),i.id=e,i.transport=i.transport||"refresh",i._dirty=n.dirty||!1,i.notifications=new o.Values({defaultConstructor:o.Notification}),i.bind(i.preview)},preview:function(){var e,t=this;e=t.transport,"postMessage"!==e||o.state("previewerAlive").get()||(e="refresh"),"postMessage"===e?t.previewer.send("setting",[t.id,t()]):"refresh"===e&&t.previewer.refresh()},findControls:function(){var e=this,t=[];return o.control.each(function(n){_.each(n.settings,function(i){i.id===e.id&&t.push(n)})}),t}}),o._latestRevision=0,o._lastSavedRevision=0,o._latestSettingRevisions={},o.bind("change",function(e){o._latestRevision+=1,o._latestSettingRevisions[e.id]=o._latestRevision}),o.bind("ready",function(){o.bind("add",function(e){e._dirty&&(o._latestRevision+=1,o._latestSettingRevisions[e.id]=o._latestRevision)})}),o.dirtyValues=function(e){var t={};return o.each(function(n){var i;n._dirty&&(i=o._latestSettingRevisions[n.id],o.state("changesetStatus").get()&&e&&e.unsaved&&(_.isUndefined(i)||i<=o._lastSavedRevision)||(t[n.id]=n.get()))}),t},o.requestChangesetUpdate=function(e){var n,i,a,s={};return n=new t.Deferred,e&&_.extend(s,e),_.each(o.dirtyValues({unsaved:!0}),function(t,n){e&&null===e[n]||(s[n]=_.extend({},s[n]||{},{value:t}))}),_.isEmpty(s)?(n.resolve({}),n.promise()):(o.state("processing").set(o.state("processing").get()+1),n.always(function(){o.state("processing").set(o.state("processing").get()-1)}),o.trigger("changeset-save",s),a=o.previewer.query({excludeCustomizedSaved:!0}),delete a.customized,_.extend(a,{nonce:o.settings.nonce.save,customize_theme:o.settings.theme.stylesheet,customize_changeset_data:JSON.stringify(s)}),i=wp.ajax.post("customize_save",a),i.done(function(e){var t={};o._lastSavedRevision=Math.max(o._latestRevision,o._lastSavedRevision),o.state("changesetStatus").set(e.changeset_status),n.resolve(e),o.trigger("changeset-saved",e),e.setting_validities&&_.each(e.setting_validities,function(e,n){!0===e&&_.isObject(s[n])&&!_.isUndefined(s[n].value)&&(t[n]=s[n].value)}),o.previewer.send("changeset-saved",_.extend({},e,{saved_changeset_values:t}))}),i.fail(function(e){n.reject(e),o.trigger("changeset-error",e)}),i.always(function(e){e.setting_validities&&o._handleSettingValidities({settingValidities:e.setting_validities})}),n.promise())},o.utils.bubbleChildValueChanges=function(e,n){t.each(n,function(t,n){e[n].bind(function(t,n){e.parent&&t!==n&&e.parent.trigger("change",e)})})},i=function(e){var t,n,i,a;t=this,e=e||{},i=function(){var e;e=(t.extended(o.Panel)||t.extended(o.Section))&&t.expanded&&t.expanded()?t.contentContainer:t.container,a=e.find(".control-focus:first"),0===a.length&&(a=e.find("input, select, textarea, button, object, a[href], [tabindex]").filter(":visible").first()),a.focus()},e.completeCallback?(n=e.completeCallback,e.completeCallback=function(){i(),n()}):e.completeCallback=i,o.state("paneVisible").set(!0),t.expand?t.expand(e):e.completeCallback()},o.utils.prioritySort=function(e,t){return e.priority()===t.priority()&&"number"==typeof e.params.instanceNumber&&"number"==typeof t.params.instanceNumber?e.params.instanceNumber-t.params.instanceNumber:e.priority()-t.priority()},o.utils.isKeydownButNotEnterEvent=function(e){return"keydown"===e.type&&13!==e.which},o.utils.areElementListsEqual=function(e,n){return e.length===n.length&&-1===_.indexOf(_.map(_.zip(e,n),function(e){return t(e[0]).is(e[1])}),!1)},a=function(){var e,t,n;return e=document.createElement("div"),t={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"},n=_.find(_.keys(t),function(t){return!_.isUndefined(e.style[t])}),n?t[n]:null}(),n=o.Class.extend({defaultActiveArguments:{duration:"fast",completeCallback:t.noop},defaultExpandedArguments:{duration:"fast",completeCallback:t.noop},containerType:"container",defaults:{title:"",description:"",priority:100,type:"default",content:null,active:!0,instanceNumber:null},initialize:function(e,n){var i=this;i.id=e,n=n||{},n.params=_.defaults(n.params||{},i.defaults),t.extend(i,n),i.templateSelector="customize-"+i.containerType+"-"+i.params.type,i.container=t(i.params.content),0===i.container.length&&(i.container=t(i.getContainer())),i.headContainer=i.container,i.contentContainer=i.getContent(),i.container=i.container.add(i.contentContainer),i.deferred={embedded:new t.Deferred},i.priority=new o.Value,i.active=new o.Value,i.activeArgumentsQueue=[],i.expanded=new o.Value,i.expandedArgumentsQueue=[],i.active.bind(function(e){var n=i.activeArgumentsQueue.shift();n=t.extend({},i.defaultActiveArguments,n),e=e&&i.isContextuallyActive(),i.onChangeActive(e,n)}),i.expanded.bind(function(e){var n=i.expandedArgumentsQueue.shift();n=t.extend({},i.defaultExpandedArguments,n),i.onChangeExpanded(e,n)}),i.deferred.embedded.done(function(){i.attachEvents()}),o.utils.bubbleChildValueChanges(i,["priority","active"]),i.priority.set(i.params.priority),i.active.set(i.params.active),i.expanded.set(!1)},ready:function(){},_children:function(e,t){var n=this,i=[];return o[t].each(function(t){t[e].get()===n.id&&i.push(t)}),i.sort(o.utils.prioritySort),i},isContextuallyActive:function(){throw new Error("Container.isContextuallyActive() must be overridden in a subclass.")},onChangeActive:function(e,n){var i,a,s=this,r=s.headContainer;return n.unchanged?void(n.completeCallback&&n.completeCallback()):(i="resolved"===o.previewer.deferred.active.state()?n.duration:0,s.extended(o.Panel)&&(o.panel.each(function(e){e!==s&&e.expanded()&&(a=e,i=0)}),e||_.each(s.sections(),function(e){e.collapse({duration:0})})),void(t.contains(document,r.get(0))?e?r.slideDown(i,n.completeCallback):s.expanded()?s.collapse({duration:i,completeCallback:function(){r.slideUp(i,n.completeCallback)}}):r.slideUp(i,n.completeCallback):(r.toggle(e),n.completeCallback&&n.completeCallback())))},_toggleActive:function(e,t){var n=this;return t=t||{},e&&this.active.get()||!e&&!this.active.get()?(t.unchanged=!0,n.onChangeActive(n.active.get(),t),!1):(t.unchanged=!1,this.activeArgumentsQueue.push(t),this.active.set(e),!0)},activate:function(e){return this._toggleActive(!0,e)},deactivate:function(e){return this._toggleActive(!1,e)},onChangeExpanded:function(){throw new Error("Must override with subclass.")},_toggleExpanded:function(e,t){var n,i=this;return t=t||{},n=t.completeCallback,!(e&&!i.active()||(o.state("paneVisible").set(!0),t.completeCallback=function(){n&&n.apply(i,arguments),e?i.container.trigger("expanded"):i.container.trigger("collapsed")},e&&i.expanded.get()||!e&&!i.expanded.get()?(t.unchanged=!0,i.onChangeExpanded(i.expanded.get(),t),1):(t.unchanged=!1,i.expandedArgumentsQueue.push(t),i.expanded.set(e),0)))},expand:function(e){return this._toggleExpanded(!0,e)},collapse:function(e){return this._toggleExpanded(!1,e)},_animateChangeExpanded:function(e){if(!a)return void(e&&e());var n,i,s,r=this,c=r.contentContainer,l=c.closest(".wp-full-overlay");n=l.add(c),s=!r.panel||""===r.panel()||!!o.panel(r.panel()).contentContainer.hasClass("skip-transition"),s&&(n=n.add("#customize-info, .customize-pane-parent")),i=function(o){2===o.eventPhase&&t(o.target).is(c)&&(c.off(a,i),n.removeClass("busy"),e&&e())},c.on(a,i),n.addClass("busy"),_.defer(function(){var e=c.closest(".wp-full-overlay-sidebar-content"),t=e.scrollTop(),n=c.data("previous-scrollTop")||0,i=r.expanded();i&&0<t?(c.css("top",t+"px"),c.data("previous-scrollTop",t)):!i&&0<t+n&&(c.css("top",n-t+"px"),e.scrollTop(n))})},focus:i,getContainer:function(){var e,n=this;return e=0!==t("#tmpl-"+n.templateSelector).length?wp.template(n.templateSelector):wp.template("customize-"+n.containerType+"-default"),e&&n.container?t.trim(e(n.params)):"<li></li>"},getContent:function(){var e=this,t=e.container,n=t.find(".accordion-section-content, .control-panel-content").first(),i="sub-"+t.attr("id"),a=i,o=t.attr("aria-owns");return o&&(a=a+" "+o),t.attr("aria-owns",a),n.detach().attr({id:i,class:"customize-pane-child "+n.attr("class")+" "+t.attr("class")})}}),o.Section=n.extend({containerType:"section",defaults:{title:"",description:"",priority:100,type:"default",content:null,active:!0,instanceNumber:null,panel:null,customizeAction:""},initialize:function(e,i){var a=this;n.prototype.initialize.call(a,e,i),a.id=e,a.panel=new o.Value,a.panel.bind(function(e){t(a.headContainer).toggleClass("control-subsection",!!e)}),a.panel.set(a.params.panel||""),o.utils.bubbleChildValueChanges(a,["panel"]),a.embed(),a.deferred.embedded.done(function(){a.ready()})},embed:function(){var e,n=this,i=t("#customize-theme-controls");e=function(e){var a;e?o.panel(e,function(e){e.deferred.embedded.done(function(){a=e.contentContainer,n.headContainer.parent().is(a)||a.append(n.headContainer),n.contentContainer.parent().is(n.headContainer)||i.append(n.contentContainer),n.deferred.embedded.resolve()})}):(a=t(".customize-pane-parent"),n.headContainer.parent().is(a)||a.append(n.headContainer),n.contentContainer.parent().is(n.headContainer)||i.append(n.contentContainer),n.deferred.embedded.resolve())},n.panel.bind(e),e(n.panel.get())},attachEvents:function(){var e,t,n=this;n.container.hasClass("cannot-expand")||(n.container.find(".accordion-section-title, .customize-section-back").on("click keydown",function(e){o.utils.isKeydownButNotEnterEvent(e)||(e.preventDefault(),n.expanded()?n.collapse():n.expand())}),n.container.find(".customize-section-title .customize-help-toggle").on("click",function(){e=n.container.find(".section-meta"),e.hasClass("cannot-expand")||(t=e.find(".customize-section-description:first"),t.toggleClass("open"),t.slideToggle(),t.attr("aria-expanded",function(e,t){return"true"===t?"false":"true"}))}))},isContextuallyActive:function(){var e=this,t=e.controls(),n=0;return _(t).each(function(e){e.active()&&(n+=1)}),0!==n},controls:function(){return this._children("section","control")},onChangeExpanded:function(e,n){var i,a,s=this,r=s.headContainer.closest(".wp-full-overlay-sidebar-content"),c=s.contentContainer,l=s.headContainer.closest(".wp-full-overlay"),d=c.find(".customize-section-back"),u=s.headContainer.find(".accordion-section-title").first();e&&!c.hasClass("open")?(i=n.unchanged?n.completeCallback:t.proxy(function(){s._animateChangeExpanded(function(){u.attr("tabindex","-1"),d.attr("tabindex","0"),d.focus(),c.css("top",""),r.scrollTop(0),n.completeCallback&&n.completeCallback()}),c.addClass("open"),l.addClass("section-open"),o.state("expandedSection").set(s)},this),n.allowMultiple||o.section.each(function(e){e!==s&&e.collapse({duration:n.duration})}),s.panel()?o.panel(s.panel()).expand({duration:n.duration,completeCallback:i}):(o.panel.each(function(e){e.collapse()}),i())):!e&&c.hasClass("open")?(s.panel()&&(a=o.panel(s.panel()),a.contentContainer.hasClass("skip-transition")&&a.collapse()),s._animateChangeExpanded(function(){d.attr("tabindex","-1"),u.attr("tabindex","0"),u.focus(),c.css("top",""),n.completeCallback&&n.completeCallback()}),c.removeClass("open"),l.removeClass("section-open"),s===o.state("expandedSection").get()&&o.state("expandedSection").set(!1)):n.completeCallback&&n.completeCallback()}}),o.ThemesSection=o.Section.extend({currentTheme:"",overlay:"",template:"",screenshotQueue:null,$window:t(window),initialize:function(){return this.$customizeSidebar=t(".wp-full-overlay-sidebar-content:first"),o.Section.prototype.initialize.apply(this,arguments)},ready:function(){var e=this;e.overlay=e.container.find(".theme-overlay"),e.template=wp.template("customize-themes-details-view"),e.container.on("keydown",function(t){e.overlay.find(".theme-wrap").is(":visible")&&(39===t.keyCode&&e.nextTheme(),37===t.keyCode&&e.previousTheme(),27===t.keyCode&&(e.closeDetails(),t.stopPropagation()))}),_.bindAll(this,"renderScreenshots")},isContextuallyActive:function(){return this.active()},attachEvents:function(){var e=this;e.container.find(".change-theme, .customize-theme").on("click keydown",function(t){o.utils.isKeydownButNotEnterEvent(t)||(t.preventDefault(),e.expanded()?e.collapse():e.expand())}),e.container.on("click keydown",".left",function(t){o.utils.isKeydownButNotEnterEvent(t)||(t.preventDefault(),e.previousTheme())}),e.container.on("click keydown",".right",function(t){o.utils.isKeydownButNotEnterEvent(t)||(t.preventDefault(),e.nextTheme())}),e.container.on("click keydown",".theme-backdrop, .close",function(t){o.utils.isKeydownButNotEnterEvent(t)||(t.preventDefault(),e.closeDetails())});var t=_.throttle(_.bind(e.renderScreenshots,this),100);e.container.on("input","#themes-filter",function(n){var i,a=n.currentTarget.value.toLowerCase().trim().replace("-"," "),o=e.controls();_.each(o,function(e){e.filter(a)}),t(),i=e.container.find("li.customize-control:visible").length,e.container.find(".theme-count").text(i)}),o.bind("ready",function(){_.each(e.controls().slice(0,3),function(e){var t,n=e.params.theme.screenshot[0];n&&(t=new Image,t.src=n)})})},onChangeExpanded:function(e,t){if(t.unchanged)return void(t.completeCallback&&t.completeCallback());var n=this,i=n.contentContainer,a=i.closest(".wp-full-overlay"),s=i.closest(".wp-full-overlay-sidebar-content"),r=i.find(".customize-theme"),c=n.headContainer.find(".change-theme");e&&!i.hasClass("current-panel")?(o.section.each(function(e){e!==n&&e.collapse({duration:t.duration})}),o.panel.each(function(e){e.collapse({duration:0})}),n._animateChangeExpanded(function(){c.attr("tabindex","-1"),r.attr("tabindex","0"),r.focus(),i.css("top",""),s.scrollTop(0),t.completeCallback&&t.completeCallback()}),a.addClass("in-themes-panel"),i.addClass("current-panel"),_.delay(n.renderScreenshots,10),n.$customizeSidebar.on("scroll.customize-themes-section",_.throttle(n.renderScreenshots,300))):!e&&i.hasClass("current-panel")&&(n._animateChangeExpanded(function(){c.attr("tabindex","0"),r.attr("tabindex","-1"),c.focus(),i.css("top",""),t.completeCallback&&t.completeCallback()}),a.removeClass("in-themes-panel"),i.removeClass("current-panel"),n.$customizeSidebar.off("scroll.customize-themes-section"))},renderScreenshots:function(){var e=this;null===e.screenshotQueue&&(e.screenshotQueue=e.controls()),e.screenshotQueue.length&&(e.screenshotQueue=_.filter(e.screenshotQueue,function(t){var n=t.container.find(".theme-screenshot"),i=n.find("img");if(!i.length)return!1;if(i.is(":hidden"))return!0;var a=e.$window.scrollTop(),o=a+e.$window.height(),s=i.offset().top,r=n.height(),c=s+r,l=3*r,d=c>=a-l&&s<=o+l;return d&&t.container.trigger("render-screenshot"),!d}))},nextTheme:function(){var e=this;e.getNextTheme()&&e.showDetails(e.getNextTheme(),function(){e.overlay.find(".right").focus()})},getNextTheme:function(){var e,t;return e=o.control("theme_"+this.currentTheme),t=e.container.next("li.customize-control-theme"),!!t.length&&(t=t[0].id.replace("customize-control-",""),e=o.control(t),e.params.theme)},previousTheme:function(){var e=this;e.getPreviousTheme()&&e.showDetails(e.getPreviousTheme(),function(){e.overlay.find(".left").focus()})},getPreviousTheme:function(){var e,t;return e=o.control("theme_"+this.currentTheme),t=e.container.prev("li.customize-control-theme"),!!t.length&&(t=t[0].id.replace("customize-control-",""),e=o.control(t),e.params.theme)},updateLimits:function(){this.getNextTheme()||this.overlay.find(".right").addClass("disabled"),this.getPreviousTheme()||this.overlay.find(".left").addClass("disabled")},loadThemePreview:function(e){var n,i,a,s=t.Deferred();return a=document.createElement("a"),a.href=location.href,a.search=t.param(_.extend(o.utils.parseQueryString(a.search.substr(1)),{theme:e,changeset_uuid:o.settings.changeset.uuid})),i=t(".wp-full-overlay"),i.addClass("customize-loading"),n=function(){var e;o.state("processing").get()>0||(o.state("processing").unbind(n),e=o.requestChangesetUpdate(),e.done(function(){t(window).off("beforeunload.customize-confirm"),top.location.href=a.href,s.resolve()}),e.fail(function(){i.removeClass("customize-loading"),s.reject()}))},0===o.state("processing").get()?n():o.state("processing").bind(n),s.promise()},showDetails:function(e,n){var i,a=this;n=n||function(){},a.currentTheme=e.id,a.overlay.html(a.template(e)).fadeIn("fast").focus(),t("body").addClass("modal-open"),a.containFocus(a.overlay),a.updateLimits(),i=a.overlay.find(".inactive-theme > a"),i.on("click",function(t){t.preventDefault(),i.hasClass("disabled")||(i.addClass("disabled"),a.loadThemePreview(e.id).fail(function(){i.removeClass("disabled")}))}),n()},closeDetails:function(){t("body").removeClass("modal-open"),this.overlay.fadeOut("fast"),o.control("theme_"+this.currentTheme).focus()},containFocus:function(e){var n;e.on("keydown",function(i){if(9===i.keyCode)return n=t(":tabbable",e),n.last()[0]!==i.target||i.shiftKey?n.first()[0]===i.target&&i.shiftKey?(n.last().focus(),!1):void 0:(n.first().focus(),!1)})}}),o.Panel=n.extend({containerType:"panel",initialize:function(e,t){var i=this;n.prototype.initialize.call(i,e,t),i.embed(),i.deferred.embedded.done(function(){i.ready()})},embed:function(){var e=this,n=t("#customize-theme-controls"),i=t(".customize-pane-parent");e.headContainer.parent().is(i)||i.append(e.headContainer),e.contentContainer.parent().is(e.headContainer)||(n.append(e.contentContainer),e.renderContent()),e.deferred.embedded.resolve()},attachEvents:function(){var e,n=this;n.headContainer.find(".accordion-section-title").on("click keydown",function(e){o.utils.isKeydownButNotEnterEvent(e)||(e.preventDefault(),n.expanded()||n.expand())}),n.container.find(".customize-panel-back").on("click keydown",function(e){o.utils.isKeydownButNotEnterEvent(e)||(e.preventDefault(),n.expanded()&&n.collapse())}),e=n.container.find(".panel-meta:first"),e.find("> .accordion-section-title .customize-help-toggle").on("click keydown",function(i){if(!o.utils.isKeydownButNotEnterEvent(i)&&(i.preventDefault(),!e.hasClass("cannot-expand"))){var a=e.find(".customize-panel-description:first");e.hasClass("open")?(e.toggleClass("open"),a.slideUp(n.defaultExpandedArguments.duration),t(this).attr("aria-expanded",!1)):(a.slideDown(n.defaultExpandedArguments.duration),e.toggleClass("open"),t(this).attr("aria-expanded",!0))}})},sections:function(){return this._children("panel","section")},isContextuallyActive:function(){var e=this,t=e.sections(),n=0;return _(t).each(function(e){e.active()&&e.isContextuallyActive()&&(n+=1)}),0!==n},onChangeExpanded:function(e,t){if(t.unchanged)return void(t.completeCallback&&t.completeCallback());var n,i=this,a=i.contentContainer,s=a.closest(".wp-full-overlay"),r=a.closest(".wp-full-overlay-sidebar-content"),c=i.headContainer.find(".accordion-section-title"),l=a.find(".customize-panel-back"),d=i.sections();e&&!a.hasClass("current-panel")?(o.section.each(function(e){i.id!==e.panel()&&e.collapse({duration:0})}),o.panel.each(function(e){i!==e&&e.collapse({duration:0})}),i.params.autoExpandSoleSection&&1===d.length&&d[0].active.get()?(a.addClass("current-panel skip-transition"),s.addClass("in-sub-panel"),d[0].expand({completeCallback:t.completeCallback})):(i._animateChangeExpanded(function(){c.attr("tabindex","-1"),l.attr("tabindex","0"),l.focus(),a.css("top",""),r.scrollTop(0),t.completeCallback&&t.completeCallback()}),a.addClass("current-panel"),s.addClass("in-sub-panel")),o.state("expandedPanel").set(i)):!e&&a.hasClass("current-panel")&&(n=a.hasClass("skip-transition"),n?a.removeClass("skip-transition"):i._animateChangeExpanded(function(){c.attr("tabindex","0"),l.attr("tabindex","-1"),c.focus(),a.css("top",""),t.completeCallback&&t.completeCallback()}),s.removeClass("in-sub-panel"),a.removeClass("current-panel"),i===o.state("expandedPanel").get()&&o.state("expandedPanel").set(!1))},renderContent:function(){var e,n=this;(e=0!==t("#tmpl-"+n.templateSelector+"-content").length?wp.template(n.templateSelector+"-content"):wp.template("customize-panel-default-content"))&&n.headContainer&&n.contentContainer.html(e(n.params))}}),o.Control=o.Class.extend({defaultActiveArguments:{duration:"fast",completeCallback:t.noop},initialize:function(e,n){var i,a,s,r=this;r.params={},t.extend(r,n||{}),r.id=e,r.selector="#customize-control-"+e.replace(/\]/g,"").replace(/\[/g,"-"),r.templateSelector="customize-control-"+r.params.type+"-content",r.container=t(r.params.content?r.params.content:r.selector),r.deferred={embedded:new t.Deferred},r.section=new o.Value,r.priority=new o.Value,r.active=new o.Value,r.activeArgumentsQueue=[],r.notifications=new o.Values({defaultConstructor:o.Notification}),r.elements=[],i=r.container.find("[data-customize-setting-link]"),a={},i.each(function(){var e,n=t(this);if(n.is(":radio")){if(e=n.prop("name"),a[e])return;a[e]=!0,n=i.filter('[name="'+e+'"]')}o(n.data("customizeSettingLink"),function(e){var t=new o.Element(n);r.elements.push(t),t.sync(e),t.set(e())})}),r.active.bind(function(e){var n=r.activeArgumentsQueue.shift();n=t.extend({},r.defaultActiveArguments,n),r.onChangeActive(e,n)}),r.section.set(r.params.section),r.priority.set(isNaN(r.params.priority)?10:r.params.priority),r.active.set(r.params.active),o.utils.bubbleChildValueChanges(r,["section","priority","active"]),s=t.map(r.params.settings,function(e){return e}),0===s.length?(r.setting=null,r.settings={},r.embed()):o.apply(o,s.concat(function(){var e;r.settings={};for(e in r.params.settings)r.settings[e]=o(r.params.settings[e]);r.setting=r.settings.default||null,_.each(r.settings,function(e){e.notifications.bind("add",function(t){var n,i,a;i=e.id+":"+t.code,a=_.extend({},t,{setting:e.id}),n=new o.Notification(i,a),r.notifications.add(n.code,n)}),e.notifications.bind("remove",function(t){r.notifications.remove(e.id+":"+t.code)})}),r.embed()})),r.deferred.embedded.done(function(){var e=_.debounce(function(){r.renderNotifications()});r.notifications.bind("add",function(t){wp.a11y.speak(t.message,"assertive"),e()}),r.notifications.bind("remove",e),r.renderNotifications(),r.ready()})},embed:function(){var e,t=this;e=function(e){var n;e&&o.section(e,function(e){e.deferred.embedded.done(function(){n=e.contentContainer.is("ul")?e.contentContainer:e.contentContainer.find("ul:first"),t.container.parent().is(n)||(n.append(t.container),t.renderContent()),t.deferred.embedded.resolve()})})},t.section.bind(e),e(t.section.get())},ready:function(){var e,n=this;"dropdown-pages"===n.params.type&&n.params.allow_addition&&(e=n.container.find(".new-content-item"),e.hide(),n.container.on("click",".add-new-toggle",function(n){t(n.currentTarget).slideUp(180),e.slideDown(180),e.find(".create-item-input").focus()}),n.container.on("click",".add-content",function(){n.addNewPage()}),n.container.on("keyup",".create-item-input",function(e){13===e.which&&n.addNewPage()}))},getNotificationsContainerElement:function(){var e,n,i=this;return n=i.container.find(".customize-control-notifications-container:first"),n.length?n:(n=t('<div class="customize-control-notifications-container"></div>'),i.container.hasClass("customize-control-nav_menu_item")?i.container.find(".menu-item-settings:first").prepend(n):i.container.hasClass("customize-control-widget_form")?i.container.find(".widget-inside:first").prepend(n):(e=i.container.find(".customize-control-title"),e.length?e.after(n):i.container.prepend(n)),n)},renderNotifications:function(){var e,n,i=this,a=!1;(e=i.getNotificationsContainerElement())&&e.length&&(n=[],i.notifications.each(function(e){n.push(e),"error"===e.type&&(a=!0)}),0===n.length?e.stop().slideUp("fast"):e.stop().slideDown("fast",null,function(){t(this).css("height","auto")}),i.notificationsTemplate||(i.notificationsTemplate=wp.template("customize-control-notifications")),i.container.toggleClass("has-notifications",0!==n.length),i.container.toggleClass("has-error",a),e.empty().append(t.trim(i.notificationsTemplate({notifications:n,altNotice:Boolean(i.altNotice)}))))},expand:function(e){o.section(this.section()).expand(e)},focus:i,onChangeActive:function(e,n){return n.unchanged?void(n.completeCallback&&n.completeCallback()):void(t.contains(document,this.container[0])?e?this.container.slideDown(n.duration,n.completeCallback):this.container.slideUp(n.duration,n.completeCallback):(this.container.toggle(e),n.completeCallback&&n.completeCallback()))},toggle:function(e){return this.onChangeActive(e,this.defaultActiveArguments)},activate:n.prototype.activate,deactivate:n.prototype.deactivate,_toggleActive:n.prototype._toggleActive,dropdownInit:function(){var e=this,t=this.container.find(".dropdown-status"),n=this.params,i=!1,a=function(e){"string"==typeof e&&n.statuses&&n.statuses[e]?t.html(n.statuses[e]).show():t.hide()};this.container.on("click keydown",".dropdown",function(t){o.utils.isKeydownButNotEnterEvent(t)||(t.preventDefault(),i||e.container.toggleClass("open"),e.container.hasClass("open")&&e.container.parent().parent().find("li.library-selected").focus(),i=!0,setTimeout(function(){i=!1},400))}),this.setting.bind(a),a(this.setting())},renderContent:function(){var e,n=this;0!==t("#tmpl-"+n.templateSelector).length&&(e=wp.template(n.templateSelector))&&n.container&&n.container.html(e(n.params))},addNewPage:function(){var e,n,i,a,s,r,c=this;if("dropdown-pages"===c.params.type&&c.params.allow_addition&&o.Menus){if(n=c.container.find(".add-new-toggle"),i=c.container.find(".new-content-item"),a=c.container.find(".create-item-input"),s=a.val(),r=c.container.find("select"),!s)return void a.addClass("invalid");a.removeClass("invalid"),a.attr("disabled","disabled"),e=o.Menus.insertAutoDraftPost({post_title:s,post_type:"page"}),e.done(function(e){var a,l,d;a=new o.Menus.AvailableItemModel({id:"post-"+e.post_id,title:s,type:"post_type",type_label:o.Menus.data.l10n.page_label,object:"page",object_id:e.post_id,url:e.url}),o.Menus.availableMenuItemsPanel.collection.add(a),l=t("#available-menu-items-post_type-page").find(".available-menu-items-list"),d=wp.template("available-menu-item"),l.prepend(d(a.attributes)),r.focus(),c.setting.set(String(e.post_id)),i.slideUp(180),n.slideDown(180)}),e.always(function(){a.val("").removeAttr("disabled")})}}}),o.ColorControl=o.Control.extend({ready:function(){var e,t=this,n="hue"===this.params.mode,i=!1;n?(e=this.container.find(".color-picker-hue"),e.val(t.setting()).wpColorPicker({change:function(e,n){i=!0,t.setting(n.color.h()),i=!1}})):(e=this.container.find(".color-picker-hex"),e.val(t.setting()).wpColorPicker({change:function(){i=!0,t.setting.set(e.wpColorPicker("color")),i=!1},clear:function(){i=!0,t.setting.set(""),i=!1}})),t.setting.bind(function(t){i||(e.val(t),e.wpColorPicker("color",t))}),t.container.on("keydown",function(n){var i;27===n.which&&(i=t.container.find(".wp-picker-container"),i.hasClass("wp-picker-active")&&(e.wpColorPicker("close"),t.container.find(".wp-color-result").focus(),n.stopPropagation()))})}}),o.MediaControl=o.Control.extend({ready:function(){function e(e){var i=t.Deferred();n.extended(o.UploadControl)?i.resolve():(e=parseInt(e,10),_.isNaN(e)||e<=0?(delete n.params.attachment,i.resolve()):n.params.attachment&&n.params.attachment.id===e&&i.resolve()),"pending"===i.state()&&wp.media.attachment(e).fetch().done(function(){n.params.attachment=this.attributes,i.resolve(),wp.customize.previewer.send(n.setting.id+"-attachment-data",this.attributes)}),i.done(function(){n.renderContent()})}var n=this;_.bindAll(n,"restoreDefault","removeFile","openFrame","select","pausePlayer"),n.container.on("click keydown",".upload-button",n.openFrame),n.container.on("click keydown",".upload-button",n.pausePlayer),n.container.on("click keydown",".thumbnail-image img",n.openFrame),n.container.on("click keydown",".default-button",n.restoreDefault),n.container.on("click keydown",".remove-button",n.pausePlayer),n.container.on("click keydown",".remove-button",n.removeFile),n.container.on("click keydown",".remove-button",n.cleanupPlayer),o.section(n.section()).container.on("expanded",function(){n.player&&n.player.setControlsSize()}).on("collapsed",function(){n.pausePlayer()}),e(n.setting()),n.setting.bind(e)},pausePlayer:function(){this.player&&this.player.pause()},cleanupPlayer:function(){this.player&&wp.media.mixin.removePlayer(this.player)},openFrame:function(e){o.utils.isKeydownButNotEnterEvent(e)||(e.preventDefault(),this.frame||this.initFrame(),this.frame.open())},initFrame:function(){this.frame=wp.media({button:{text:this.params.button_labels.frame_button},states:[new wp.media.controller.Library({title:this.params.button_labels.frame_title,library:wp.media.query({type:this.params.mime_type}),multiple:!1,date:!1})]}),this.frame.on("select",this.select)},select:function(){var e,t=this.frame.state().get("selection").first().toJSON(),n=window._wpmejsSettings||{};this.params.attachment=t,this.setting(t.id),e=this.container.find("audio, video").get(0),e?this.player=new MediaElementPlayer(e,n):this.cleanupPlayer()},restoreDefault:function(e){o.utils.isKeydownButNotEnterEvent(e)||(e.preventDefault(),this.params.attachment=this.params.defaultAttachment,this.setting(this.params.defaultAttachment.url))},removeFile:function(e){o.utils.isKeydownButNotEnterEvent(e)||(e.preventDefault(),this.params.attachment={},this.setting(""),this.renderContent())}}),o.UploadControl=o.MediaControl.extend({select:function(){var e,t=this.frame.state().get("selection").first().toJSON(),n=window._wpmejsSettings||{};this.params.attachment=t,this.setting(t.url),e=this.container.find("audio, video").get(0),e?this.player=new MediaElementPlayer(e,n):this.cleanupPlayer()},success:function(){},removerVisibility:function(){}}),o.ImageControl=o.UploadControl.extend({thumbnailSrc:function(){}}),o.BackgroundControl=o.UploadControl.extend({ready:function(){o.UploadControl.prototype.ready.apply(this,arguments)},select:function(){o.UploadControl.prototype.select.apply(this,arguments),wp.ajax.post("custom-background-add",{nonce:_wpCustomizeBackground.nonces.add,wp_customize:"on",customize_theme:o.settings.theme.stylesheet,attachment_id:this.params.attachment.id})}}),o.BackgroundPositionControl=o.Control.extend({ready:function(){var e,n=this;n.container.on("change",'input[name="background-position"]',function(){var e=t(this).val().split(" ");n.settings.x(e[0]),n.settings.y(e[1])}),e=_.debounce(function(){var e,t,i,a;e=n.settings.x.get(),t=n.settings.y.get(),a=String(e)+" "+String(t),i=n.container.find('input[name="background-position"][value="'+a+'"]'),i.click()}),n.settings.x.bind(e),n.settings.y.bind(e),e()}}),o.CroppedImageControl=o.MediaControl.extend({openFrame:function(e){o.utils.isKeydownButNotEnterEvent(e)||(this.initFrame(),this.frame.setState("library").open())},initFrame:function(){var e=_wpMediaViewsL10n;this.frame=wp.media({button:{text:e.select,close:!1},states:[new wp.media.controller.Library({title:this.params.button_labels.frame_title,library:wp.media.query({type:"image"}),multiple:!1,date:!1,priority:20,suggestedWidth:this.params.width,suggestedHeight:this.params.height}),new wp.media.controller.CustomizeImageCropper({imgSelectOptions:this.calculateImageSelectOptions,control:this})]}),this.frame.on("select",this.onSelect,this),this.frame.on("cropped",this.onCropped,this),this.frame.on("skippedcrop",this.onSkippedCrop,this)},onSelect:function(){var e=this.frame.state().get("selection").first().toJSON();this.params.width!==e.width||this.params.height!==e.height||this.params.flex_width||this.params.flex_height?this.frame.setState("cropper"):(this.setImageFromAttachment(e),this.frame.close())},onCropped:function(e){this.setImageFromAttachment(e)},calculateImageSelectOptions:function(e,t){var n,i,a,o=t.get("control"),s=!!parseInt(o.params.flex_width,10),r=!!parseInt(o.params.flex_height,10),c=e.get("width"),l=e.get("height"),d=parseInt(o.params.width,10),u=parseInt(o.params.height,10),p=d/u,h=d,f=u;return t.set("canSkipCrop",!o.mustBeCropped(s,r,d,u,c,l)),c/l>p?(u=l,d=u*p):(d=c,u=d/p),n=(c-d)/2,i=(l-u)/2,a={handles:!0,keys:!0,instance:!0,persistent:!0,imageWidth:c,imageHeight:l,minWidth:h>d?d:h,minHeight:f>u?u:f,x1:n,y1:i,x2:d+n,y2:u+i},!1===r&&!1===s&&(a.aspectRatio=d+":"+u),!0===r&&(delete a.minHeight,
a.maxWidth=c),!0===s&&(delete a.minWidth,a.maxHeight=l),a},mustBeCropped:function(e,t,n,i,a,o){return!(!0===e&&!0===t||!0===e&&i===o||!0===t&&n===a||n===a&&i===o||a<=n)},onSkippedCrop:function(){var e=this.frame.state().get("selection").first().toJSON();this.setImageFromAttachment(e)},setImageFromAttachment:function(e){this.params.attachment=e,this.setting(e.id)}}),o.SiteIconControl=o.CroppedImageControl.extend({initFrame:function(){var e=_wpMediaViewsL10n;this.frame=wp.media({button:{text:e.select,close:!1},states:[new wp.media.controller.Library({title:this.params.button_labels.frame_title,library:wp.media.query({type:"image"}),multiple:!1,date:!1,priority:20,suggestedWidth:this.params.width,suggestedHeight:this.params.height}),new wp.media.controller.SiteIconCropper({imgSelectOptions:this.calculateImageSelectOptions,control:this})]}),this.frame.on("select",this.onSelect,this),this.frame.on("cropped",this.onCropped,this),this.frame.on("skippedcrop",this.onSkippedCrop,this)},onSelect:function(){var e=this.frame.state().get("selection").first().toJSON(),t=this;this.params.width!==e.width||this.params.height!==e.height||this.params.flex_width||this.params.flex_height?this.frame.setState("cropper"):wp.ajax.post("crop-image",{nonce:e.nonces.edit,id:e.id,context:"site-icon",cropDetails:{x1:0,y1:0,width:this.params.width,height:this.params.height,dst_width:this.params.width,dst_height:this.params.height}}).done(function(e){t.setImageFromAttachment(e),t.frame.close()}).fail(function(){t.frame.trigger("content:error:crop")})},setImageFromAttachment:function(e){var n,i,a=["site_icon-32","thumbnail","full"];_.each(a,function(t){i||_.isUndefined(e.sizes[t])||(i=e.sizes[t])}),this.params.attachment=e,this.setting(e.id),i&&(n=t('link[rel="icon"][sizes="32x32"]'),n.attr("href",i.url))},removeFile:function(e){o.utils.isKeydownButNotEnterEvent(e)||(e.preventDefault(),this.params.attachment={},this.setting(""),this.renderContent(),t('link[rel="icon"][sizes="32x32"]').attr("href","/favicon.ico"))}}),o.HeaderControl=o.Control.extend({ready:function(){this.btnRemove=t("#customize-control-header_image .actions .remove"),this.btnNew=t("#customize-control-header_image .actions .new"),_.bindAll(this,"openMedia","removeImage"),this.btnNew.on("click",this.openMedia),this.btnRemove.on("click",this.removeImage),o.HeaderTool.currentHeader=this.getInitialHeaderImage(),new o.HeaderTool.CurrentView({model:o.HeaderTool.currentHeader,el:"#customize-control-header_image .current .container"}),new o.HeaderTool.ChoiceListView({collection:o.HeaderTool.UploadsList=new o.HeaderTool.ChoiceList,el:"#customize-control-header_image .choices .uploaded .list"}),new o.HeaderTool.ChoiceListView({collection:o.HeaderTool.DefaultsList=new o.HeaderTool.DefaultsList,el:"#customize-control-header_image .choices .default .list"}),o.HeaderTool.combinedList=o.HeaderTool.CombinedList=new o.HeaderTool.CombinedList([o.HeaderTool.UploadsList,o.HeaderTool.DefaultsList]),wp.media.controller.Cropper.prototype.defaults.doCropArgs.wp_customize="on",wp.media.controller.Cropper.prototype.defaults.doCropArgs.customize_theme=o.settings.theme.stylesheet},getInitialHeaderImage:function(){if(!o.get().header_image||!o.get().header_image_data||_.contains(["remove-header","random-default-image","random-uploaded-image"],o.get().header_image))return new o.HeaderTool.ImageModel;var e=_.find(_wpCustomizeHeader.uploads,function(e){return e.attachment_id===o.get().header_image_data.attachment_id});return e||(e={url:o.get().header_image,thumbnail_url:o.get().header_image,attachment_id:o.get().header_image_data.attachment_id}),new o.HeaderTool.ImageModel({header:e,choice:e.url.split("/").pop()})},calculateImageSelectOptions:function(e,t){var n,i,a,s,r,c,l=parseInt(_wpCustomizeHeader.data.width,10),d=parseInt(_wpCustomizeHeader.data.height,10),u=!!parseInt(_wpCustomizeHeader.data["flex-width"],10),p=!!parseInt(_wpCustomizeHeader.data["flex-height"],10);return r=e.get("width"),s=e.get("height"),this.headerImage=new o.HeaderTool.ImageModel,this.headerImage.set({themeWidth:l,themeHeight:d,themeFlexWidth:u,themeFlexHeight:p,imageWidth:r,imageHeight:s}),t.set("canSkipCrop",!this.headerImage.shouldBeCropped()),n=l/d,i=r,a=s,i/a>n?(d=a,l=d*n):(l=i,d=l/n),c={handles:!0,keys:!0,instance:!0,persistent:!0,imageWidth:r,imageHeight:s,x1:0,y1:0,x2:l,y2:d},!1===p&&!1===u&&(c.aspectRatio=l+":"+d),!1===p&&(c.maxHeight=d),!1===u&&(c.maxWidth=l),c},openMedia:function(e){var t=_wpMediaViewsL10n;e.preventDefault(),this.frame=wp.media({button:{text:t.selectAndCrop,close:!1},states:[new wp.media.controller.Library({title:t.chooseImage,library:wp.media.query({type:"image"}),multiple:!1,date:!1,priority:20,suggestedWidth:_wpCustomizeHeader.data.width,suggestedHeight:_wpCustomizeHeader.data.height}),new wp.media.controller.Cropper({imgSelectOptions:this.calculateImageSelectOptions})]}),this.frame.on("select",this.onSelect,this),this.frame.on("cropped",this.onCropped,this),this.frame.on("skippedcrop",this.onSkippedCrop,this),this.frame.open()},onSelect:function(){this.frame.setState("cropper")},onCropped:function(e){var t=e.url,n=e.attachment_id,i=e.width,a=e.height;this.setImageFromURL(t,n,i,a)},onSkippedCrop:function(e){var t=e.get("url"),n=e.get("width"),i=e.get("height");this.setImageFromURL(t,e.id,n,i)},setImageFromURL:function(e,t,n,i){var a,s={};s.url=e,s.thumbnail_url=e,s.timestamp=_.now(),t&&(s.attachment_id=t),n&&(s.width=n),i&&(s.height=i),a=new o.HeaderTool.ImageModel({header:s,choice:e.split("/").pop()}),o.HeaderTool.UploadsList.add(a),o.HeaderTool.currentHeader.set(a.toJSON()),a.save(),a.importImage()},removeImage:function(){o.HeaderTool.currentHeader.trigger("hide"),o.HeaderTool.CombinedList.trigger("control:removeImage")}}),o.ThemeControl=o.Control.extend({touchDrag:!1,isRendered:!1,renderContent:function(){var e=this,t=arguments;o.section(e.section(),function(n){n.expanded()?(o.Control.prototype.renderContent.apply(e,t),e.isRendered=!0):n.expanded.bind(function(n){n&&!e.isRendered&&(o.Control.prototype.renderContent.apply(e,t),e.isRendered=!0)})})},ready:function(){var e=this;e.container.on("touchmove",".theme",function(){e.touchDrag=!0}),e.container.on("click keydown touchend",".theme",function(n){if(!o.utils.isKeydownButNotEnterEvent(n))return!0===e.touchDrag?e.touchDrag=!1:void(t(n.target).is(".theme-actions .button")||o.section(e.section()).loadThemePreview(e.params.theme.id))}),e.container.on("click keydown",".theme-actions .theme-details",function(t){o.utils.isKeydownButNotEnterEvent(t)||(t.preventDefault(),o.section(e.section()).showDetails(e.params.theme))}),e.container.on("render-screenshot",function(){var e=t(this).find("img"),n=e.data("src");n&&e.attr("src",n)})},filter:function(e){var t=this,n=t.params.theme.name+" "+t.params.theme.description+" "+t.params.theme.tags+" "+t.params.theme.author;n=n.toLowerCase().replace("-"," "),-1!==n.search(e)?t.activate():t.deactivate()}}),o.defaultConstructor=o.Setting,o.control=new o.Values({defaultConstructor:o.Control}),o.section=new o.Values({defaultConstructor:o.Section}),o.panel=new o.Values({defaultConstructor:o.Panel}),o.PreviewFrame=o.Messenger.extend({sensitivity:null,initialize:function(e,n){var i=t.Deferred();i.promise(this),this.container=e.container,t.extend(e,{channel:o.PreviewFrame.uuid()}),o.Messenger.prototype.initialize.call(this,e,n),this.add("previewUrl",e.previewUrl),this.query=t.extend(e.query||{},{customize_messenger_channel:this.channel()}),this.run(i)},run:function(e){var n,i,a,s=this,r=!1,c=!1,l=null,d="{}"!==s.query.customized;s._ready&&s.unbind("ready",s._ready),s._ready=function(t){c=!0,l=t,s.container.addClass("iframe-ready"),t&&r&&e.resolveWith(s,[t])},s.bind("ready",s._ready),n=document.createElement("a"),n.href=s.previewUrl(),i=_.extend(o.utils.parseQueryString(n.search.substr(1)),{customize_changeset_uuid:s.query.customize_changeset_uuid,customize_theme:s.query.customize_theme,customize_messenger_channel:s.query.customize_messenger_channel}),n.search=t.param(i),s.iframe=t("<iframe />",{title:o.l10n.previewIframeTitle,name:"customize-"+s.channel()}),s.iframe.attr("onmousewheel",""),d?s.iframe.attr("data-src",n.href):s.iframe.attr("src",n.href),s.iframe.appendTo(s.container),s.targetWindow(s.iframe[0].contentWindow),d&&(a=t("<form>",{action:n.href,target:s.iframe.attr("name"),method:"post",hidden:"hidden"}),a.append(t("<input>",{type:"hidden",name:"_method",value:"GET"})),_.each(s.query,function(e,n){a.append(t("<input>",{type:"hidden",name:n,value:e}))}),s.container.append(a),a.submit(),a.remove()),s.bind("iframe-loading-error",function(t){return s.iframe.remove(),0===t?void s.login(e):-1===t?void e.rejectWith(s,["cheatin"]):void e.rejectWith(s,["request failure"])}),s.iframe.one("load",function(){r=!0,c?e.resolveWith(s,[l]):setTimeout(function(){e.rejectWith(s,["ready timeout"])},s.sensitivity)})},login:function(e){var n,i=this;return n=function(){e.rejectWith(i,["logged out"])},this.triedLogin?n():void t.get(o.settings.url.ajax,{action:"logged-in"}).fail(n).done(function(a){var s;"1"!==a&&n(),s=t("<iframe />",{src:i.previewUrl(),title:o.l10n.previewIframeTitle}).hide(),s.appendTo(i.container),s.on("load",function(){i.triedLogin=!0,s.remove(),i.run(e)})})},destroy:function(){o.Messenger.prototype.destroy.call(this),this.iframe&&this.iframe.remove(),delete this.iframe,delete this.targetWindow}}),function(){var e=0;o.PreviewFrame.uuid=function(){return"preview-"+String(e++)}}(),o.setDocumentTitle=function(e){var t,n;t=o.settings.documentTitleTmpl,n=t.replace("%s",e),document.title=n,o.trigger("title",n)},o.Previewer=o.Messenger.extend({refreshBuffer:null,initialize:function(e,n){var i=this,a=document.createElement("a");t.extend(i,n||{}),i.deferred={active:t.Deferred()},i.refresh=_.debounce(function(e){return function(){var t,n;t=function(){return 0===o.state("processing").get()},t()?e.call(i):(n=function(){t()&&(e.call(i),o.state("processing").unbind(n))},o.state("processing").bind(n))}}(i.refresh),i.refreshBuffer),i.container=o.ensure(e.container),i.allowedUrls=e.allowedUrls,e.url=window.location.href,o.Messenger.prototype.initialize.call(i,e),a.href=i.origin(),i.add("scheme",a.protocol.replace(/:$/,"")),i.add("previewUrl",e.previewUrl).setter(function(e){var n,a,s,r=null,c=[];return n=document.createElement("a"),n.href=e,/\/wp-(admin|includes|content)(\/|$)/.test(n.pathname)?null:(n.search.length>1&&(a=o.utils.parseQueryString(n.search.substr(1)),delete a.customize_changeset_uuid,delete a.customize_theme,delete a.customize_messenger_channel,_.isEmpty(a)?n.search="":n.search=t.param(a)),c.push(n),i.scheme.get()+":"!==n.protocol&&(n=document.createElement("a"),n.href=c[0].href,n.protocol=i.scheme.get()+":",c.unshift(n)),s=document.createElement("a"),_.find(c,function(e){return!_.isUndefined(_.find(i.allowedUrls,function(t){if(s.href=t,n.protocol===s.protocol&&n.host===s.host&&0===n.pathname.indexOf(s.pathname.replace(/\/$/,"")))return r=e.href,!0}))}),r)}),i.bind("ready",i.ready),i.deferred.active.done(_.bind(i.keepPreviewAlive,i)),i.bind("synced",function(){i.send("active")}),i.previewUrl.bind(i.refresh),i.scroll=0,i.bind("scroll",function(e){i.scroll=e}),i.bind("url",function(e){var t,n=!1;i.scroll=0,t=function(){n=!0},i.previewUrl.bind(t),i.previewUrl.set(e),i.previewUrl.unbind(t),n||i.refresh()}),i.bind("documentTitle",function(e){o.setDocumentTitle(e)})},ready:function(e){var t,n=this,i={};i.settings=o.get(),i["settings-modified-while-loading"]=n.settingsModifiedWhileLoading,("resolved"!==n.deferred.active.state()||n.loading)&&(i.scroll=n.scroll),i["edit-shortcut-visibility"]=o.state("editShortcutVisibility").get(),n.send("sync",i),e.currentUrl&&(n.previewUrl.unbind(n.refresh),n.previewUrl.set(e.currentUrl),n.previewUrl.bind(n.refresh)),t={panel:e.activePanels,section:e.activeSections,control:e.activeControls},_(t).each(function(e,t){o[t].each(function(n,i){_.isUndefined(o.settings[t+"s"][i])&&_.isUndefined(e[i])||(e[i]?n.activate():n.deactivate())})}),e.settingValidities&&o._handleSettingValidities({settingValidities:e.settingValidities,focusInvalidControl:!1})},keepPreviewAlive:function(){var e,t,n,i,a=this;i=function(){t=setTimeout(n,o.settings.timeouts.keepAliveCheck)},e=function(){o.state("previewerAlive").set(!0),clearTimeout(t),i()},n=function(){o.state("previewerAlive").set(!1)},i(),a.bind("ready",e),a.bind("keep-alive",e)},query:function(){},abort:function(){this.loading&&(this.loading.destroy(),delete this.loading)},refresh:function(){var e,t=this;t.send("loading-initiated"),t.abort(),t.loading=new o.PreviewFrame({url:t.url(),previewUrl:t.previewUrl(),query:t.query({excludeCustomizedSaved:!0})||{},container:t.container}),t.settingsModifiedWhileLoading={},e=function(e){t.settingsModifiedWhileLoading[e.id]=!0},o.bind("change",e),t.loading.always(function(){o.unbind("change",e)}),t.loading.done(function(e){var n,i=this;t.preview=i,t.targetWindow(i.targetWindow()),t.channel(i.channel()),n=function(){i.unbind("synced",n),t._previousPreview&&t._previousPreview.destroy(),t._previousPreview=t.preview,t.deferred.active.resolve(),delete t.loading},i.bind("synced",n),t.trigger("ready",e)}),t.loading.fail(function(e){t.send("loading-failed"),"logged out"===e&&(t.preview&&(t.preview.destroy(),delete t.preview),t.login().done(t.refresh)),"cheatin"===e&&t.cheatin()})},login:function(){var e,n,i,a=this;return this._login?this._login:(e=t.Deferred(),this._login=e.promise(),n=new o.Messenger({channel:"login",url:o.settings.url.login}),i=t("<iframe />",{src:o.settings.url.login,title:o.l10n.loginIframeTitle}).appendTo(this.container),n.targetWindow(i[0].contentWindow),n.bind("login",function(){var t=a.refreshNonces();t.always(function(){i.remove(),n.destroy(),delete a._login}),t.done(function(){e.resolve()}),t.fail(function(){a.cheatin(),e.reject()})}),this._login)},cheatin:function(){t(document.body).empty().addClass("cheatin").append("<h1>"+o.l10n.cheatin+"</h1><p>"+o.l10n.notAllowed+"</p>")},refreshNonces:function(){var e,n=t.Deferred();return n.promise(),e=wp.ajax.post("customize_refresh_nonces",{wp_customize:"on",customize_theme:o.settings.theme.stylesheet}),e.done(function(e){o.trigger("nonce-refresh",e),n.resolve()}),e.fail(function(){n.reject()}),n}}),o.settingConstructor={},o.controlConstructor={color:o.ColorControl,media:o.MediaControl,upload:o.UploadControl,image:o.ImageControl,cropped_image:o.CroppedImageControl,site_icon:o.SiteIconControl,header:o.HeaderControl,background:o.BackgroundControl,background_position:o.BackgroundPositionControl,theme:o.ThemeControl},o.panelConstructor={},o.sectionConstructor={themes:o.ThemesSection},o._handleSettingValidities=function(e){var t,n=[],i=!1;_.each(e.settingValidities,function(e,t){var i=o(t);i&&(_.isObject(e)&&_.each(e,function(e,t){var a,s,r=!1;a=new o.Notification(t,_.extend({fromServer:!0},e)),s=i.notifications(a.code),s&&(r=a.type!==s.type||a.message!==s.message||!_.isEqual(a.data,s.data)),r&&i.notifications.remove(t),i.notifications.has(a.code)||i.notifications.add(t,a),n.push(i.id)}),i.notifications.each(function(t){!t.fromServer||"error"!==t.type||!0!==e&&e[t.code]||i.notifications.remove(t.code)}))}),e.focusInvalidControl&&(t=o.findControlsForSettings(n),_(_.values(t)).find(function(e){return _(e).find(function(e){var t=e.section()&&o.section.has(e.section())&&o.section(e.section()).expanded();return t&&e.expanded&&(t=e.expanded()),t&&(e.focus(),i=!0),i})}),i||_.isEmpty(t)||_.values(t)[0][0].focus())},o.findControlsForSettings=function(e){var t,n={};return _.each(_.unique(e),function(e){var i=o(e);i&&(t=i.findControls())&&t.length>0&&(n[e]=t)}),n},o.reflowPaneContents=_.bind(function(){var e,n,i,a=[],s=!1;document.activeElement&&(n=t(document.activeElement)),o.panel.each(function(t){var n=t.sections(),i=_.pluck(n,"headContainer");a.push(t),e=t.contentContainer.is("ul")?t.contentContainer:t.contentContainer.find("ul:first"),o.utils.areElementListsEqual(i,e.children("[id]"))||(_(n).each(function(t){e.append(t.headContainer)}),s=!0)}),o.section.each(function(t){var n=t.controls(),i=_.pluck(n,"container");t.panel()||a.push(t),e=t.contentContainer.is("ul")?t.contentContainer:t.contentContainer.find("ul:first"),o.utils.areElementListsEqual(i,e.children("[id]"))||(_(n).each(function(t){e.append(t.container)}),s=!0)}),a.sort(o.utils.prioritySort),i=_.pluck(a,"headContainer"),e=t("#customize-theme-controls .customize-pane-parent"),o.utils.areElementListsEqual(i,e.children())||(_(a).each(function(t){e.append(t.headContainer)}),s=!0),o.panel.each(function(e){var t=e.active();e.active.callbacks.fireWith(e.active,[t,t])}),o.section.each(function(e){var t=e.active();e.active.callbacks.fireWith(e.active,[t,t])}),s&&n&&n.focus(),o.trigger("pane-contents-reflowed")},o),t(function(){if(o.settings=window._wpCustomizeSettings,o.l10n=window._wpCustomizeControlsL10n,o.settings&&t.support.postMessage&&(t.support.cors||!o.settings.isCrossDomain)){null===o.PreviewFrame.prototype.sensitivity&&(o.PreviewFrame.prototype.sensitivity=o.settings.timeouts.previewFrameSensitivity),null===o.Previewer.prototype.refreshBuffer&&(o.Previewer.prototype.refreshBuffer=o.settings.timeouts.windowRefresh);var e,n=t(document.body),i=n.children(".wp-full-overlay"),a=t("#customize-info .panel-title.site-title"),s=t(".customize-controls-close"),r=t("#save"),c=t("#customize-footer-actions");t("#customize-controls").on("keydown",function(e){var n=13===e.which,i=t(e.target);n&&(i.is("input:not([type=button])")||i.is("select"))&&e.preventDefault()}),t(".customize-info").find("> .accordion-section-title .customize-help-toggle").on("click",function(){var e=t(this).closest(".accordion-section"),n=e.find(".customize-panel-description:first");e.hasClass("cannot-expand")||(e.hasClass("open")?(e.toggleClass("open"),n.slideUp(o.Panel.prototype.defaultExpandedArguments.duration),t(this).attr("aria-expanded",!1)):(n.slideDown(o.Panel.prototype.defaultExpandedArguments.duration),e.toggleClass("open"),t(this).attr("aria-expanded",!0)))}),o.previewer=new o.Previewer({container:"#customize-preview",form:"#customize-controls",previewUrl:o.settings.url.preview,allowedUrls:o.settings.url.allowed},{nonce:o.settings.nonce,query:function(e){var t={wp_customize:"on",customize_theme:o.settings.theme.stylesheet,nonce:this.nonce.preview,customize_changeset_uuid:o.settings.changeset.uuid};return t.customized=JSON.stringify(o.dirtyValues({unsaved:e&&e.excludeCustomizedSaved})),t},save:function(n){function i(e){h[e.id]=!0}var a,s,c,l=this,d=t.Deferred(),u="publish",p=o.state("processing"),h={},f=[];return n&&n.status&&(u=n.status),o.state("saving").get()&&(d.reject("already_saving"),d.promise()),o.state("saving").set(!0),o.bind("change",i),s=function(){var a,s,p={},m=o._latestRevision;return o.each(function(e){e.notifications.each(function(t){"error"!==t.type||t.fromServer||(f.push(e.id),p[e.id]||(p[e.id]={}),p[e.id][t.code]=t)})}),c=o.findControlsForSettings(f),_.isEmpty(c)?(s=t.extend(l.query({excludeCustomizedSaved:!1}),{nonce:l.nonce.save,customize_changeset_status:u}),n&&n.date&&(s.customize_changeset_date=n.date),n&&n.title&&(s.customize_changeset_title=n.title),a=wp.ajax.post("customize_save",s),r.prop("disabled",!0),o.trigger("save",a),a.always(function(){o.state("saving").set(!1),r.prop("disabled",!1),o.unbind("change",i)}),a.fail(function(e){"0"===e?e="not_logged_in":"-1"===e&&(e="invalid_nonce"),"invalid_nonce"===e?l.cheatin():"not_logged_in"===e&&(l.preview.iframe.hide(),l.login().done(function(){l.save(),l.preview.iframe.show()})),e.setting_validities&&o._handleSettingValidities({settingValidities:e.setting_validities,focusInvalidControl:!0}),d.rejectWith(l,[e]),o.trigger("error",e)}),void a.done(function(t){l.send("saved",t),o.state("changesetStatus").set(t.changeset_status),"publish"===t.changeset_status&&(o.each(function(e){e._dirty&&(_.isUndefined(o._latestSettingRevisions[e.id])||o._latestSettingRevisions[e.id]<=m)&&(e._dirty=!1)}),o.state("changesetStatus").set(""),o.settings.changeset.uuid=t.next_changeset_uuid,e.send("changeset-uuid",o.settings.changeset.uuid)),t.setting_validities&&o._handleSettingValidities({settingValidities:t.setting_validities,focusInvalidControl:!0}),d.resolveWith(l,[t]),o.trigger("saved",t),_.isEmpty(h)||o.state("saved").set(!1)})):(_.values(c)[0][0].focus(),o.unbind("change",i),d.rejectWith(l,[{setting_invalidities:p}]),o.state("saving").set(!1),d.promise())},0===p()?s():(a=function(){0===p()&&(o.state.unbind("change",a),s())},o.state.bind("change",a)),d.promise()}}),o.previewer.bind("nonce",function(e){t.extend(this.nonce,e)}),o.bind("nonce-refresh",function(e){t.extend(o.settings.nonce,e),t.extend(o.previewer.nonce,e),o.previewer.send("nonce-refresh",e)}),t.each(o.settings.settings,function(e,t){var n;n=new(o.settingConstructor[t.type]||o.Setting)(e,t.value,{transport:t.transport,previewer:o.previewer,dirty:!!t.dirty}),o.add(e,n)}),t.each(o.settings.panels,function(e,t){var n;n=new(o.panelConstructor[t.type]||o.Panel)(e,{params:t}),o.panel.add(e,n)}),t.each(o.settings.sections,function(e,t){var n;n=new(o.sectionConstructor[t.type]||o.Section)(e,{params:t}),o.section.add(e,n)}),t.each(o.settings.controls,function(e,t){var n;n=new(o.controlConstructor[t.type]||o.Control)(e,{params:t,previewer:o.previewer}),o.control.add(e,n)}),_.each(["panel","section","control"],function(e){var t=o.settings.autofocus[e];t&&o[e](t,function(e){e.deferred.embedded.done(function(){o.previewer.deferred.active.done(function(){e.focus()})})})}),o.bind("ready",o.reflowPaneContents),t([o.panel,o.section,o.control]).each(function(e,t){var n=_.debounce(o.reflowPaneContents,o.settings.timeouts.reflowPaneContents);t.bind("add",n),t.bind("change",n),t.bind("remove",n)}),function(){var e,i=new o.Values,a=i.create("saved"),c=i.create("saving"),l=i.create("activated"),d=i.create("processing"),u=i.create("paneVisible"),p=i.create("expandedPanel"),h=i.create("expandedSection"),f=i.create("changesetStatus"),m=i.create("previewerAlive"),g=i.create("editShortcutVisibility");i.bind("change",function(){var e;l()?""===f.get()&&a()?(r.val(o.l10n.saved),s.find(".screen-reader-text").text(o.l10n.close)):(r.val(o.l10n.save),s.find(".screen-reader-text").text(o.l10n.cancel)):(r.val(o.l10n.activate),s.find(".screen-reader-text").text(o.l10n.cancel)),e=!c()&&(!l()||!a()||""!==f()&&"publish"!==f()),r.prop("disabled",!e)}),f(o.settings.changeset.status),a(!0),""===f()&&o.each(function(e){e._dirty&&a(!1)}),c(!1),l(o.settings.theme.active),d(0),u(!0),p(!1),h(!1),m(!0),g("visible"),o.bind("change",function(){i("saved").get()&&(i("saved").set(!1),e(!0))}),c.bind(function(e){n.toggleClass("saving",e)}),o.bind("saved",function(e){i("saved").set(!0),"publish"===e.changeset_status&&i("activated").set(!0)}),l.bind(function(e){e&&o.trigger("activated")}),e=function(e){var n,i;if(history.replaceState){if(n=document.createElement("a"),n.href=location.href,i=o.utils.parseQueryString(n.search.substr(1)),e){if(i.changeset_uuid===o.settings.changeset.uuid)return;i.changeset_uuid=o.settings.changeset.uuid}else{if(!i.changeset_uuid)return;delete i.changeset_uuid}n.search=t.param(i),history.replaceState({},document.title,n.href)}},f.bind(function(t){e(""!==t&&"publish"!==t)}),o.state=i}(),o.previewer.previewUrl()?o.previewer.refresh():o.previewer.previewUrl(o.settings.url.home),r.click(function(e){o.previewer.save(),e.preventDefault()}).keydown(function(e){9!==e.which&&(13===e.which&&o.previewer.save(),e.preventDefault())}),s.keydown(function(e){9!==e.which&&(13===e.which&&this.click(),e.preventDefault())}),t(".collapse-sidebar").on("click",function(){o.state("paneVisible").set(!o.state("paneVisible").get())}),o.state("paneVisible").bind(function(e){i.toggleClass("preview-only",!e),i.toggleClass("expanded",e),i.toggleClass("collapsed",!e),e?t(".collapse-sidebar").attr({"aria-expanded":"true","aria-label":o.l10n.collapseSidebar}):t(".collapse-sidebar").attr({"aria-expanded":"false","aria-label":o.l10n.expandSidebar})}),t("body").on("keydown",function(e){var n,i=[],a=[],s=[];27===e.which&&(t(e.target).is("body")||t.contains(t("#customize-controls")[0],e.target))&&(o.control.each(function(e){e.expanded&&e.expanded()&&_.isFunction(e.collapse)&&i.push(e)}),o.section.each(function(e){e.expanded()&&a.push(e)}),o.panel.each(function(e){e.expanded()&&s.push(e)}),i.length>0&&0===a.length&&(i.length=0),(n=i[0]||a[0]||s[0])&&(n.collapse(),e.preventDefault()))}),t(".customize-controls-preview-toggle").on("click",function(){o.state("paneVisible").set(!o.state("paneVisible").get())}),function(){var e,n,i,a,s,r,c,l=t(".wp-full-overlay-sidebar-content");e=function(e){var t,s=e,c=o.state("expandedSection").get(),l=o.state("expandedPanel").get();if(r&&r.element&&i(r.element),!s)if(!c&&l&&l.contentContainer)s=l;else{if(l||!c||!c.contentContainer)return void(r=!1);s=c}t=s.contentContainer.find(".customize-section-title, .panel-meta").first(),t.length?(r={instance:s,element:t,parent:t.closest(".customize-pane-child"),height:n(t)},c&&a(r.element,r.parent)):r=!1},o.state("expandedSection").bind(e),o.state("expandedPanel").bind(e),l.on("scroll",_.throttle(function(){if(r){var e=l.scrollTop(),t=!c||e<=c;c=e,s(r,e,t)}},8)),i=function(e){e.hasClass("is-sticky")&&e.removeClass("is-sticky").addClass("maybe-sticky is-in-view").css("top",l.scrollTop()+"px")},a=function(e,t){e.removeClass("maybe-sticky is-in-view").css({width:"",top:""}),t.css("padding-top","")},n=function(e){var t=e.data("height");return t||(t=e.outerHeight(),e.data("height",t)),t},s=function(e,t,n){var i=e.element,a=e.parent,o=e.height,s=parseInt(i.css("top"),10),r=i.hasClass("maybe-sticky"),c=i.hasClass("is-sticky"),l=i.hasClass("is-in-view");if(!n)return c&&(s=t,i.removeClass("is-sticky").css({top:s+"px",width:""})),void(l&&t>s+o&&(i.removeClass("is-in-view"),a.css("padding-top","")));if(!r&&t>=o)r=!0,i.addClass("maybe-sticky");else if(0===t)return i.removeClass("maybe-sticky is-in-view is-sticky").css({top:"",width:""}),void a.css("padding-top","");l&&!c?s>=t&&i.addClass("is-sticky").css({top:"",width:a.outerWidth()+"px"}):r&&!l&&(i.addClass("is-in-view").css("top",t-o+"px"),a.css("padding-top",o+"px"))}}(),o.previewedDevice=new o.Value,o.bind("ready",function(){_.find(o.settings.previewableDevices,function(e,t){if(!0===e.default)return o.previewedDevice.set(t),!0})}),c.find(".devices button").on("click",function(e){o.previewedDevice.set(t(e.currentTarget).data("device"))}),o.previewedDevice.bind(function(e){var n=t(".wp-full-overlay"),i="";c.find(".devices button").removeClass("active").attr("aria-pressed",!1),c.find(".devices .preview-"+e).addClass("active").attr("aria-pressed",!0),t.each(o.settings.previewableDevices,function(e){i+=" preview-"+e}),n.removeClass(i).addClass("preview-"+e)}),a.length&&o("blogname",function(e){var n=function(){a.text(t.trim(e())||o.l10n.untitledBlogName)};e.bind(n),n()}),e=new o.Messenger({url:o.settings.url.parent,channel:"loader"}),e.bind("back",function(){s.on("click.customize-controls-close",function(t){t.preventDefault(),e.send("close")})}),t(window).on("beforeunload.customize-confirm",function(){if(!o.state("saved")())return setTimeout(function(){i.removeClass("customize-loading")},1),o.l10n.saveAlert}),t.each(["saved","change"],function(t,n){o.bind(n,function(){e.send(n)})}),o.bind("title",function(t){e.send("title",t)}),e.send("changeset-uuid",o.settings.changeset.uuid),e.send("ready"),t.each({background_image:{controls:["background_preset","background_position","background_size","background_repeat","background_attachment"],callback:function(e){return!!e}},show_on_front:{controls:["page_on_front","page_for_posts"],callback:function(e){return"page"===e}},header_textcolor:{controls:["header_textcolor"],callback:function(e){return"blank"!==e}}},function(e,n){o(e,function(e){t.each(n.controls,function(t,i){o.control(i,function(t){var i=function(e){t.container.toggle(n.callback(e))};i(e.get()),e.bind(i)})})})}),o.control("background_preset",function(e){var t,n,i,a,s,r;t={default:[!1,!1,!1,!1],fill:[!0,!1,!1,!1],fit:[!0,!1,!0,!1],repeat:[!0,!1,!1,!0],custom:[!0,!0,!0,!0]},n=[_wpCustomizeBackground.defaults["default-position-x"],_wpCustomizeBackground.defaults["default-position-y"],_wpCustomizeBackground.defaults["default-size"],_wpCustomizeBackground.defaults["default-repeat"],_wpCustomizeBackground.defaults["default-attachment"]],i={default:n,fill:["left","top","cover","no-repeat","fixed"],fit:["left","top","contain","no-repeat","fixed"],repeat:["left","top","auto","repeat","scroll"]},a=function(e){_.each(["background_position","background_size","background_repeat","background_attachment"],function(n,i){var a=o.control(n);a&&a.container.toggle(t[e][i])})},s=function(e){_.each(["background_position_x","background_position_y","background_size","background_repeat","background_attachment"],function(t,n){var a=o(t);a&&a.set(i[e][n])})},r=e.setting.get(),a(r),e.setting.bind("change",function(e){a(e),"custom"!==e&&s(e)})}),o.control("background_repeat",function(e){e.elements[0].unsync(o("background_repeat")),e.element=new o.Element(e.container.find("input")),e.element.set("no-repeat"!==e.setting()),e.element.bind(function(t){e.setting.set(t?"repeat":"no-repeat")}),e.setting.bind(function(t){e.element.set("no-repeat"!==t)})}),o.control("background_attachment",function(e){e.elements[0].unsync(o("background_attachment")),e.element=new o.Element(e.container.find("input")),e.element.set("fixed"!==e.setting()),e.element.bind(function(t){e.setting.set(t?"scroll":"fixed")}),e.setting.bind(function(t){e.element.set("fixed"!==t)})}),o.control("display_header_text",function(e){var t="";e.elements[0].unsync(o("header_textcolor")),e.element=new o.Element(e.container.find("input")),e.element.set("blank"!==e.setting()),e.element.bind(function(n){n||(t=o("header_textcolor").get()),e.setting.set(n?t:"blank")}),e.setting.bind(function(t){e.element.set("blank"!==t)})}),o("show_on_front","page_on_front",function(e,t){var n=function(){"page"===e()&&parseInt(t(),10)>0&&o.previewer.previewUrl.set(o.settings.url.home)};e.bind(n),t.bind(n)}),o("page_for_posts",function(e){e.bind(function(e){(e=parseInt(e,10))>0&&o.previewer.previewUrl.set(o.settings.url.home+"?page_id="+e)})}),o.control("custom_css",function(e){e.deferred.embedded.done(function(){var t=e.container.find("textarea"),n=t[0];t.on("blur",function(){t.data("next-tab-blurs",!1)}),t.on("keydown",function(e){var i,a,o,s=9,r=27;return 27===e.keyCode?void(t.data("next-tab-blurs")||(t.data("next-tab-blurs",!0),e.stopPropagation())):void(9!==e.keyCode||e.ctrlKey||e.altKey||e.shiftKey||t.data("next-tab-blurs")||(i=n.selectionStart,a=n.selectionEnd,o=n.value,i>=0&&(n.value=o.substring(0,i).concat("\t",o.substring(a)),t.selectionStart=n.selectionEnd=i+1),e.stopPropagation(),e.preventDefault()))})})}),o.control("header_video",function(e){e.deferred.embedded.done(function(){var t=function(){var t,n=o.section(e.section());n&&(t=n.container.find(".header-video-not-currently-previewable:first"),e.active.get()?t.stop().slideUp("fast"):t.stop().slideDown("fast"))};t(),e.active.bind(t)})}),o.previewer.bind("selective-refresh-setting-validities",function(e){o._handleSettingValidities({settingValidities:e,focusInvalidControl:!1})}),o.previewer.bind("focus-control-for-setting",function(e){var t=[];o.control.each(function(n){var i=_.pluck(n.settings,"id");-1!==_.indexOf(i,e)&&t.push(n)}),t.length&&(t.sort(function(e,t){return e.priority()-t.priority()}),t[0].focus())}),o.previewer.bind("refresh",function(){o.previewer.refresh()}),o.state("paneVisible").bind(function(e){var n;n=window.matchMedia?window.matchMedia("screen and ( max-width: 640px )").matches:t(window).width()<=640,o.state("editShortcutVisibility").set(e||n?"visible":"hidden")}),window.matchMedia&&window.matchMedia("screen and ( max-width: 640px )").addListener(function(){var e=o.state("paneVisible");e.callbacks.fireWith(e,[e.get(),e.get()])}),o.previewer.bind("edit-shortcut-visibility",function(e){o.state("editShortcutVisibility").set(e)}),
o.state("editShortcutVisibility").bind(function(e){o.previewer.send("edit-shortcut-visibility",e)}),function(){var e,n,i,a=!1;n=function(){a||(a=!0,o.requestChangesetUpdate().always(function(){a=!1})),i()},i=function(){clearTimeout(e),e=setTimeout(function(){n()},o.settings.timeouts.changesetAutoSave)},i(),t(window).on("blur.wp-customize-changeset-update",function(){n()}),t(window).on("beforeunload.wp-customize-changeset-update",function(){n()})}(),o.trigger("ready")}})}(wp,jQuery);